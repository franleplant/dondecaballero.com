<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.61d51b09aa0e4bf85a4c.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}

/*! tailwindcss v2.1.1 | MIT License | https://tailwindcss.com *//*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}hr{height:0;color:inherit}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}legend{padding:0}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:Montserrat,sans-serif;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{box-sizing:border-box;border:0 solid #e5e7eb}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}*{--tw-shadow:0 0 transparent;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}body{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}h1,h2,h3,h4,h5,small,summary{font-size:2.25rem;line-height:2.5rem;--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}h1,h2,h3,h4,h5,small,summary{font-family:Fjalla One,sans-serif;font-weight:700;padding-bottom:.5rem}h2{font-size:1.5rem;line-height:2rem}h3{font-size:1.25rem;font-family:Fjalla One,sans-serif}h3,h4{line-height:1.75rem;font-weight:700;padding-bottom:.5rem}h4{font-size:1.125rem;font-family:Montserrat,sans-serif}h5,h6{font-size:1rem;line-height:1.5rem;font-family:Montserrat,sans-serif;font-weight:700;padding-bottom:.5rem}h6{font-style:italic}a{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}a:hover{text-decoration:underline}a{font-weight:700}blockquote{border-radius:.375rem;padding:1.5rem 1.5rem 1.5rem 2rem;font-style:italic;border-left-width:8px;--tw-border-opacity:1;border-color:rgba(0,0,0,var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity))}blockquote *{font-size:1.125rem;line-height:1.75rem}ul{list-style-type:disc}ol,ul{padding-left:2rem}ol{list-style-type:decimal}li{padding-top:.25rem;padding-bottom:.25rem}.absolute{position:absolute}.fixed{position:fixed}.m-auto{margin:auto}.-m-1{margin:-.25rem}.m-1{margin:.25rem}.-m-0\.5{margin:-.125rem}.-m-0{margin:0}.m-0\.5{margin:.125rem}.m-0{margin:0}.my-5{margin-top:1.25rem;margin-bottom:1.25rem}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.mt-2{margin-top:.5rem}.mb-3{margin-bottom:.75rem}.\!mt-auto{margin-top:auto!important}.mb-2{margin-bottom:.5rem}.mt-auto{margin-top:auto}.mt-1{margin-top:.25rem}.mt-4{margin-top:1rem}.\!mt-4{margin-top:1rem!important}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-28{height:7rem}.h-16{height:4rem}.min-h-200{min-height:200px}.w-full{width:100%}.w-56{width:14rem}.max-w-lg{max-width:32rem}.max-w-screen-xl{max-width:1280px}.max-w-md{max-width:28rem}.flex-1{flex:1 1 0%}.flex-grow-0{flex-grow:0}.cursor-pointer{cursor:pointer}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-items-center{justify-items:center}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.25rem*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.25rem*var(--tw-space-y-reverse))}.space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.25rem*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem*var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem*var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem*var(--tw-space-y-reverse))}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.border-0{border-width:0}.border{border-width:1px}.border-2{border-width:2px}.border-t{border-top-width:1px}.border-b{border-bottom-width:1px}.border-secondary{--tw-border-opacity:1;border-color:rgba(0,0,0,var(--tw-border-opacity))}.border-transparent{border-color:transparent}.border-red-600{--tw-border-opacity:1;border-color:rgba(220,38,38,var(--tw-border-opacity))}.bg-pink-600{--tw-bg-opacity:1;background-color:rgba(219,39,119,var(--tw-bg-opacity))}.bg-yellow-600{--tw-bg-opacity:1;background-color:rgba(217,119,6,var(--tw-bg-opacity))}.bg-latestPostBg,.bg-postBg,.bg-tagBg{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-0{padding:0}.p-1{padding:.25rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.px-4{padding-left:1rem;padding-right:1rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.px-2{padding-left:.5rem;padding-right:.5rem}.\!py-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-4{padding-top:1rem;padding-bottom:1rem}.pt-1{padding-top:.25rem}.pt-5{padding-top:1.25rem}.pb-0{padding-bottom:0}.\!pt-0{padding-top:0!important}.pb-3{padding-bottom:.75rem}.text-center{text-align:center}.font-sans{font-family:Montserrat,sans-serif}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem}.text-lg,.text-xl{line-height:1.75rem}.text-lg{font-size:1.125rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.leading-10{line-height:2.5rem}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-primary,.text-secondary{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:rgba(55,65,81,var(--tw-text-opacity))}.text-pink-600{--tw-text-opacity:1;color:rgba(219,39,119,var(--tw-text-opacity))}.\!no-underline{text-decoration:none!important}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}.filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.card-subheading-info{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.gatsby-code-title,.gatsby-highlight{margin:-.75rem}.gatsby-code-title+.gatsby-highlight{margin-top:-.5rem!important}.gatsby-code-title{border-top-left-radius:.375rem;border-top-right-radius:.375rem;--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));--tw-bg-opacity:1;background-color:rgba(0,0,0,var(--tw-bg-opacity));font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;padding:.75rem}.header-anchor{visibility:hidden}h1:hover>a.header-anchor,h2:hover>a.header-anchor,h3:hover>a.header-anchor,h4:hover>a.header-anchor,h5:hover>a.header-anchor,h6:hover>a.header-anchor{visibility:visible;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;transition-delay:75ms}:not(pre)>code[class*=language-]{word-break:break-word}.hover\:text-opacity-80:hover{--tw-text-opacity:0.8}.focus\:border-transparent:focus{border-color:transparent}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)}.focus\:ring-pink-600:focus{--tw-ring-opacity:1;--tw-ring-color:rgba(219,39,119,var(--tw-ring-opacity))}@media (min-width:640px){.sm\:mt-3{margin-top:.75rem}.sm\:ml-0{margin-left:0}.sm\:min-h-250{min-height:250px}.sm\:w-5\/6{width:83.333333%}.sm\:w-3\/4{width:75%}.sm\:p-2{padding:.5rem}.sm\:\!pt-5{padding-top:1.25rem!important}}@media (min-width:768px){.md\:mx-auto{margin-left:auto;margin-right:auto}.md\:block{display:block}.md\:h-40{height:10rem}.md\:w-full{width:100%}.md\:flex-row{flex-direction:row}.md\:p-2{padding:.5rem}.md\:p-10{padding:2.5rem}}@media (min-width:1024px){.lg\:mt-10{margin-top:2.5rem}.lg\:w-1\/3{width:33.333333%}.lg\:max-w-4xl{max-width:56rem}.lg\:p-20{padding:5rem}.lg\:px-2{padding-left:.5rem;padding-right:.5rem}.lg\:py-0{padding-top:0;padding-bottom:0}}</style><meta name="generator" content="Gatsby 2.32.12"/><style type="text/css">
    .header-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-anchor svg,
    h2 .header-anchor svg,
    h3 .header-anchor svg,
    h4 .header-anchor svg,
    h5 .header-anchor svg,
    h6 .header-anchor svg {
      visibility: hidden;
    }
    h1:hover .header-anchor svg,
    h2:hover .header-anchor svg,
    h3:hover .header-anchor svg,
    h4:hover .header-anchor svg,
    h5:hover .header-anchor svg,
    h6:hover .header-anchor svg,
    h1 .header-anchor:focus svg,
    h2 .header-anchor:focus svg,
    h3 .header-anchor:focus svg,
    h4 .header-anchor:focus svg,
    h5 .header-anchor:focus svg,
    h6 .header-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 100)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=ad819d30ce95568d86e3cad559b077f8" type="image/png"/><link rel="icon" href="/favicon.svg?v=ad819d30ce95568d86e3cad559b077f8" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=ad819d30ce95568d86e3cad559b077f8"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=ad819d30ce95568d86e3cad559b077f8"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=ad819d30ce95568d86e3cad559b077f8"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=ad819d30ce95568d86e3cad559b077f8"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=ad819d30ce95568d86e3cad559b077f8"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=ad819d30ce95568d86e3cad559b077f8"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=ad819d30ce95568d86e3cad559b077f8"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=ad819d30ce95568d86e3cad559b077f8"/><title data-react-helmet="true">Rock-paper-scissors game built in Cardano smart contracts | Don de Caballero</title><meta data-react-helmet="true" name="title" content="Rock-paper-scissors game built in Cardano smart contracts"/><meta data-react-helmet="true" name="description" content=" A quick high level overview of how you can write a state machine based smart contract in the upcoming Cardano&#x27;s Plutus platform for Smart Contracts or Smart Transactions. 
By franleplant"/><meta data-react-helmet="true" property="og:title" content="Rock-paper-scissors game built in Cardano smart contracts"/><meta data-react-helmet="true" property="og:description" content=" A quick high level overview of how you can write a state machine based smart contract in the upcoming Cardano&#x27;s Plutus platform for Smart Contracts or Smart Transactions. 
By franleplant"/><meta data-react-helmet="true" property="og:image" content="https://randomleplants.com/static/ad819d30ce95568d86e3cad559b077f8/moustache-logo.svg"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="franleplant"/><meta data-react-helmet="true" name="twitter:title" content="Rock-paper-scissors game built in Cardano smart contracts"/><meta data-react-helmet="true" name="twitter:description" content=" A quick high level overview of how you can write a state machine based smart contract in the upcoming Cardano&#x27;s Plutus platform for Smart Contracts or Smart Transactions. 
By franleplant"/><link as="script" rel="preload" href="/webpack-runtime-6d19b8d63e7883bef03b.js"/><link as="script" rel="preload" href="/framework-8e528b732ab2eaadb7b7.js"/><link as="script" rel="preload" href="/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/app-883d5d47b8c5000034e3.js"/><link as="script" rel="preload" href="/201ad6c3f2c882b9d9cf079e4b183f9823aadb3d-ec3aed9365b4e4f3c2a0.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-215e4bd5a8dabe20c4c9.js"/><link as="fetch" rel="preload" href="/page-data/cardano-smart-contract-game/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1219926595.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/914163225.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div><section><div class="p-4 sm:p-2 lg:px-2 lg:py-0 flex flex-col mx-auto sm:w-5/6 justify-between"><h1 class="md:mx-auto sm:w-3/4 w-full max-w-screen-xl mt-1 sm:mt-3 flex py-3"><a class="grid mx-auto !no-underline justify-items-center" href="/"><h1>DON DE CABALLERO</h1><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgNDkwLjQ0NCA0OTAuNDQ0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0OTAuNDQ0IDQ5MC40NDQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBkPSJNNDgwLjk4NiwyMTUuOTQ3Yy0xLjQsMS4xLTIuOSwyLjItNC41LDMuM2wwLDBsMCwwYy03LjksNS4xLTE4LjUsOS4yLTMyLjgsOS45Yy00MS4zLDIuMS03Ny42LTY4LjktMTM1LjUtNjYKCQljLTE0LjgsMC43LTM1LjMsNC4zLTYzLDMxLjhjLTI3LjctMjcuNi00OC4xLTMxLjEtNjMtMzEuOGMtNTcuOS0yLjktOTQuMiw2OC4xLTEzNS41LDY2Yy0xNC4zLTAuNy0yNS00LjgtMzIuOC05LjlsMCwwbDAsMAoJCWMtMS42LTEuMS0zLjEtMi4yLTQuNS0zLjNjLTEzLjItOC40LTguOSw3LjItOCwxMC4zYzEyLjEsMzcuMyw0My4zLDk3LjEsMTE5LjcsMTAwLjljNjAuOCwzLjEsMTAyLjctMjQuNywxMjQuMS01NS40CgkJYzIxLjQsMzAuNiw2My4zLDU4LjQsMTI0LjEsNTUuNGM3Ni40LTMuOCwxMDcuNi02My42LDExOS43LTEwMC45QzQ4OS45ODYsMjIzLjE0Nyw0OTQuMjg2LDIwNy41NDcsNDgwLjk4NiwyMTUuOTQ3eiIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" alt="Don De Caballero" style="width:100px;height:100px"/></a></h1><div class="flex flex-col md:flex-row md:mx-auto sm:w-3/4 w-full max-w-screen-xl ml-2 sm:ml-0"><a class="flex-1 leading-10 md:p-2 text-md hover:text-opacity-80 flex-grow-0 mx-auto" href="/about">Acerca</a></div><div class="border-b border-t border-secondary py-3 mt-4 w-full sm:w-3/4 max-w-screen-xl md:mx-auto text-center"><p>Estilo para caballeros</p></div></div></section><main><div class="lg:max-w-4xl m-auto lg:mt-10 p-3 md:p-10 rounded-md"><article class="space-y-5"><div class="flex flex-wrap -m-0.5 dark:-m-2  undefined"><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#haskell</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#cardano</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#plutus</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#blockchain</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#smart contracts</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#smart transactions</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#game</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#state machines</span><span class="
      m-0.5 rounded px-2
      text-xs cursor-pointer
      bg-tagBg
      text-secondary
      font-mono
      pb-0
      !py-1
      ">#plutus pioneer program</span></div><header class="pb-3"><h1> <!-- -->Rock-paper-scissors game built in Cardano smart contracts<!-- --> </h1><div class="py-3 text-sm text-gray-700">August 10, 2021 • 8 min read</div></header><section class="space-y-5 nsj-post-content"><p>I’ve taken part of the second cohort of the <a href="https://testnets.cardano.org/en/plutus-pioneer-program/">Plutus Pioneer Program</a> where one can
learn how to write Smart Contracts in <a href="https://cardano.org/">Cardano</a> by using <a href="https://github.com/input-output-hk/plutus">Plutus</a>, set for main chain release in late 2021.</p>
<p>Cardano’s version of Smart Contract is pretty “weird” coming from <a href="https://ethereum.org/en/">Ethereum</a>,
and I plan to write about it later but it does provide some interesting abstractions that let
you express common patterns rather easily, in particular we are going to be covering
how you can model your DApp as a state machine and how can you express said model in Plutus
pretty easily.</p>
<p>Cardano’s Smart Contracts are written in a Haskell library called Plutus, so put up your
functional programming hat and let’s get our hands dirty.</p>
<p>Note: at the time of writing there still some wrinkles in Cardano’s smart contract platform, so
if you are not part of the Plutus Pioneer Program you might have some difficulties running the code,
but hopefully it will be a nice showcase of how Cardano enables smart contracts.
Also, State Machines are just a higher level abstraction to write smart contracts in Cardano but
not at all the only way, so you are not limited to them.</p>
<h2 id="quick-intro-to-plutus-concepts" style="position:relative;">Quick intro to Plutus Concepts<a href="#quick-intro-to-plutus-concepts" aria-label="quick intro to plutus concepts permalink" class="header-anchor after">#</a></h2>
<p>Plutus smart contracts should be called <strong>Smart Transactions</strong> because that is all you can really do <em>on-chain</em>.</p>
<p>From the outside, users can only generate <strong>Transactions</strong> with inputs (UTxOs or unspent transaction outputs of previous
transactions) and generate outputs (also UTxOs) at different public key addresses depending on the use case.</p>
<p>These transactions are created <em>off-chain</em> and sent along with a trivial payload
called the <strong>Redeemer</strong>.</p>
<p>A transaction is only applied to the blockchain after being <em>validated</em> by <strong>Validator script</strong>
which is the main thing DApp developers write and run <em>on-chain</em>.</p>
<p>This validator script has a public key address made up of its hash and
funds (UTxOs) can only be spent if the transaction trying to spend them
passes the validation, which is the business logic running <em>on-chain</em>.</p>
<p>A UTxO contains coins or Native Tokens plus a trivial custom payload called the <code class="language-text">Datum</code>,
which serves as a custom application state and is central to the ability to write DApps.</p>
<p>The main difference between user accounts and script accounts is that
user accounts need to sign spending transactions with their private key but
anyone can spend from a script address if the transaction is considered valid by the
validator script itself. Is a pretty interesting model.</p>
<p>All this is part of the EUTxO model or the Extended Unspect Transaction Output which is
the model pioneered by Bitcoin with some extensions to allow <em>smart contracts</em>.</p>
<p>Surprisingly this model allows pretty much all what you would expect from a smart contract platform, it is just modeled
differently and does comes with trade-offs. It is similar to what <code class="language-text">functional programming</code> brings to the table in terms
of predictability, testability and simpler interfaces comparing it to imperative or object oriented programming,
so we could say that <strong>Cardano is a platform for pure functional smart contracts</strong>.</p>
<h2 id="rock-paper-scissors" style="position:relative;">Rock Paper Scissors<a href="#rock-paper-scissors" aria-label="rock paper scissors permalink" class="header-anchor after">#</a></h2>
<p>We are going write the Rock Paper Scissors game but in the blockchain, I eventually will
like to really deploy it and add a nice UI on top of it.</p>
<p>The model we are going to use makes the first player commit to a play but without telling exactly the
play by using a hash, then the second player plays, and finally the first player reveals and the “stake”
or “bet” is distributed. There are also play deadlines and reveal deadlines to make the contract safe.</p>
<p>Here is a complete state diagram of our game model.
The transitions are labeled with the <code class="language-text">Redeemer</code> and its payload, constraints and checks.
Constraints are common transaction constraints that Plutus provides abstractions for and
checks are anything else developers might want to check to allow or not a given state transition.
In our case we only use <code class="language-text">checks</code> in the chase of <code class="language-text">Player1RevealWin</code> and <code class="language-text">Player1RevealDraw</code>, where
we check that effectively it is a win or a draw for Player1.
The state are composed of <code class="language-text">Datum</code> which holds trivial data plus the staked / bet value.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d90346e03181797b40d09b9e18171b09/98d66/states.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 131.0810810810811%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHsSxNAMtFiq//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEAAQUCT//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CT//EABwQAAICAgMAAAAAAAAAAAAAAAABETEQIUFRsf/aAAgBAQABPyF9JlLbIPRTHEirY1TNQJQrwqx//9oADAMBAAIAAwAAABBAOjz/xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8QdP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAQADAQEBAQAAAAAAAAAAAAEAESExQRBR/9oACAEBAAE/EFa6KglG8BXWJlhxkWOhktT1AbPPydH17HAVEKc+n//Z'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="State transition function"
        title="State transition function"
        src="/static/d90346e03181797b40d09b9e18171b09/1c72d/states.jpg"
        srcset="/static/d90346e03181797b40d09b9e18171b09/a80bd/states.jpg 148w,
/static/d90346e03181797b40d09b9e18171b09/1c91a/states.jpg 295w,
/static/d90346e03181797b40d09b9e18171b09/1c72d/states.jpg 590w,
/static/d90346e03181797b40d09b9e18171b09/a8a14/states.jpg 885w,
/static/d90346e03181797b40d09b9e18171b09/fbd2c/states.jpg 1180w,
/static/d90346e03181797b40d09b9e18171b09/98d66/states.jpg 1905w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h2 id="on-chain-state-code-classlanguage-textdatumcode" style="position:relative;">On-chain state: <code class="language-text">Datum</code><a href="#on-chain-state-code-classlanguage-textdatumcode" aria-label="on chain state code classlanguage textdatumcode permalink" class="header-anchor after">#</a></h2>
<p>As we said before, the <code class="language-text">Datum</code> will be a trivial piece of data we are going to store <code class="language-text">on-chain</code>.
In this particular case we are going to use it to store the current state of our state machine plus
the choices made by players.</p>
<p><code class="language-text">FinalState</code> will contain no <code class="language-text">Datum</code> and no <code class="language-text">value</code> (coins and Native Tokens)</p>
<div class="gatsby-highlight" data-language="haskell"><pre class="language-haskell"><code class="language-haskell"><span class="token keyword">data</span> <span class="token constant">GameDatum</span> <span class="token operator">=</span>
      <span class="token comment">-- at first we only store the hash of the player1's choice</span>
      <span class="token constant">State0</span> <span class="token constant">ByteString</span>
      <span class="token comment">-- then we store the hash of the player1's choice plus the player2's choice</span>
    <span class="token operator">|</span> <span class="token constant">State1</span> <span class="token constant">ByteString</span>            <span class="token constant">GameChoice.GameChoice</span>
      <span class="token comment">-- when resolving draws we store both choices unhashed</span>
    <span class="token operator">|</span> <span class="token constant">State2</span> <span class="token constant">GameChoice.GameChoice</span> <span class="token constant">GameChoice.GameChoice</span>
      <span class="token comment">-- the final state stores nothing</span>
    <span class="token operator">|</span> <span class="token constant">StateFinal</span>
    <span class="token keyword">deriving</span> <span class="token constant">Prelude.Show</span></code></pre></div>
<p><a href="https://github.com/franleplant/plutus-pioneer-program-fork/blob/rock-paper-scissors/code/week07/src/RPS/GameDatum.hs">GameDatum.hs</a></p>
<h2 id="transaction-validator-input-code-classlanguage-textredeemercode" style="position:relative;">Transaction validator input: <code class="language-text">Redeemer</code><a href="#transaction-validator-input-code-classlanguage-textredeemercode" aria-label="transaction validator input code classlanguage textredeemercode permalink" class="header-anchor after">#</a></h2>
<div class="gatsby-highlight" data-language="haskell"><pre class="language-haskell"><code class="language-haskell"><span class="token keyword">data</span> <span class="token constant">GameRedeemer</span> <span class="token operator">=</span>
        <span class="token constant">Player2Play</span>       <span class="token constant">GameChoice.GameChoice</span>
      <span class="token operator">|</span> <span class="token constant">Player2NoRevealClaim</span>
      <span class="token operator">|</span> <span class="token constant">Player1RevealWin</span>  <span class="token constant">ByteString</span> <span class="token constant">GameChoice.GameChoice</span>
      <span class="token operator">|</span> <span class="token constant">Player1RevealDraw</span> <span class="token constant">ByteString</span> <span class="token constant">GameChoice.GameChoice</span>
      <span class="token operator">|</span> <span class="token constant">Player2ClaimDraw</span>
      <span class="token operator">|</span> <span class="token constant">Player1NoPlayClaim</span>
    <span class="token keyword">deriving</span> <span class="token constant">Prelude.Show</span></code></pre></div>
<p>These are the actions players can take to move the game state around.</p>
<p><a href="https://github.com/franleplant/plutus-pioneer-program-fork/blob/rock-paper-scissors/code/week07/src/RPS/GameRedeemer.hs">GameRedeemer.hs</a></p>
<h2 id="on-chain-validator-state-machine" style="position:relative;">On-chain validator: State Machine<a href="#on-chain-validator-state-machine" aria-label="on chain validator state machine permalink" class="header-anchor after">#</a></h2>
<p>This is the abstraction on top of a regular validator script that Plutus provides in order
to model the common case of a State Machine.</p>
<p>We are only going to show one of the main happy paths, player 1 plays,
then player 2 plays, finally player 1 reveals and win:</p>
<div class="gatsby-highlight" data-language="haskell"><pre class="language-haskell"><code class="language-haskell"><span class="token comment">-- this are arms of a haskell's case and we are doing pattern matching.</span>
<span class="token comment">-- (State0, Player2Play) -> State1</span>
<span class="token comment">-- this represents the valid transition from State0 where Player1</span>
<span class="token comment">-- played in secret to State1 where Player2 played (not secretly)</span>
<span class="token punctuation">(</span><span class="token constant">State0</span> <span class="token hvariable">player1ChoiceHash</span><span class="token punctuation">,</span> <span class="token constant">GameRedeemer.Player2Play</span> <span class="token hvariable">player2Choice</span><span class="token punctuation">,</span> <span class="token hvariable">staked</span><span class="token punctuation">)</span>
  <span class="token comment">-- each player needs to stake in order to play</span>
  <span class="token comment">-- this validates that State0 has 1xStake</span>
  <span class="token operator">|</span> <span class="token hvariable">lovelaces</span> <span class="token hvariable">staked</span> <span class="token operator">==</span> <span class="token hvariable">Game.stake</span> <span class="token hvariable">game</span> <span class="token operator">-></span>
      <span class="token keyword">let</span> <span class="token hvariable">constraints</span> <span class="token operator">=</span> <span class="token hvariable">Constraints.mustBeSignedBy</span> <span class="token punctuation">(</span><span class="token hvariable">Game.player2</span> <span class="token hvariable">game</span><span class="token punctuation">)</span> <span class="token operator">&lt;></span>
                        <span class="token hvariable">Constraints.mustValidateIn</span> <span class="token punctuation">(</span><span class="token hvariable">to</span> <span class="token operator">$</span> <span class="token hvariable">Game.playDeadline</span> <span class="token hvariable">game</span><span class="token punctuation">)</span>
          <span class="token hvariable">datum</span>       <span class="token operator">=</span> <span class="token constant">State1</span> <span class="token hvariable">player1ChoiceHash</span> <span class="token hvariable">player2Choice</span>
          <span class="token hvariable">stake</span>       <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">lovelaceValueOf</span> <span class="token operator">$</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token hvariable">Game.stake</span> <span class="token hvariable">game</span><span class="token punctuation">)</span>
      <span class="token comment">-- we return the next state: State1 (plus its payload)</span>
      <span class="token keyword">in</span> <span class="token constant">Just</span> <span class="token punctuation">(</span><span class="token hvariable">constraints</span> <span class="token punctuation">,</span> <span class="token constant">State</span> <span class="token hvariable">datum</span> <span class="token hvariable">stake</span><span class="token punctuation">)</span>


<span class="token comment">-- (State1, Player1RevealWin) -> StateFinal</span>
<span class="token punctuation">(</span><span class="token constant">State1</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span><span class="token punctuation">,</span> <span class="token constant">GameRedeemer.Player1RevealWin</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span><span class="token punctuation">,</span> <span class="token hvariable">staked</span><span class="token punctuation">)</span>
  <span class="token comment">-- since both player played at this stage, the amount</span>
  <span class="token comment">-- of coins staked should be 2x stake</span>
  <span class="token operator">|</span> <span class="token hvariable">lovelaces</span> <span class="token hvariable">staked</span> <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token hvariable">Game.stake</span> <span class="token hvariable">game</span><span class="token punctuation">)</span> <span class="token operator">-></span>
      <span class="token keyword">let</span> <span class="token hvariable">constraints</span> <span class="token operator">=</span> <span class="token hvariable">Constraints.mustBeSignedBy</span> <span class="token punctuation">(</span><span class="token hvariable">Game.player1</span> <span class="token hvariable">game</span><span class="token punctuation">)</span> <span class="token operator">&lt;></span>
                        <span class="token hvariable">Constraints.mustValidateIn</span> <span class="token punctuation">(</span><span class="token hvariable">to</span> <span class="token operator">$</span> <span class="token hvariable">Game.revealDeadline</span> <span class="token hvariable">game</span><span class="token punctuation">)</span> <span class="token operator">&lt;></span>
                        <span class="token hvariable">Constraints.mustPayToPubKey</span> <span class="token punctuation">(</span><span class="token hvariable">Game.player1</span> <span class="token hvariable">game</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">lovelaceValueOf</span> <span class="token operator">$</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token hvariable">Game.stake</span> <span class="token hvariable">game</span><span class="token punctuation">)</span>
      <span class="token comment">-- we return the next state: StateFinal</span>
      <span class="token keyword">in</span> <span class="token constant">Just</span> <span class="token punctuation">(</span><span class="token hvariable">constraints</span><span class="token punctuation">,</span> <span class="token constant">State</span> <span class="token constant">StateFinal</span> <span class="token hvariable">mempty</span><span class="token punctuation">)</span></code></pre></div>
<p><a href="https://github.com/franleplant/plutus-pioneer-program-fork/blob/rock-paper-scissors/code/week07/src/RPS/Validator.hs">Validator.hs</a></p>
<p><code class="language-text">constraints</code> are a Plutus primitive that lets you express checks for the incoming transaction,
have in mind that this validator runs whenever some trivial address is trying to consume one of its
UTxOs, so in order to spend a UTxO the validator needs to agree with said action.</p>
<p>In this case we are only allowing this particular state change to happen if the transaction
trying to be applied is signed by Player2 and it is done before the <code class="language-text">playDeadline</code>.</p>
<p>We return the next State defined in <code class="language-text">datum</code> and we duplicate the <code class="language-text">stake</code> amount of Ada
because Player2 needs to <code class="language-text">stake</code> or <code class="language-text">bet</code> in order to participate.</p>
<p>Additional checks can be done by implementing a <code class="language-text">check</code> function, here is an
example of how we use it to add an extra check to the <code class="language-text">Player1RevealWin</code> transition.
We simply check that the revealed choice that Player1 made actually wins Player2’s:</p>
<div class="gatsby-highlight" data-language="haskell"><pre class="language-haskell"><code class="language-haskell"><span class="token hvariable">check</span> <span class="token punctuation">(</span><span class="token constant">State1</span> <span class="token hvariable">player1ChoiceHash</span> <span class="token hvariable">player2Choice</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Player1RevealWin</span> <span class="token hvariable">nonce</span> <span class="token hvariable">player1Choice</span><span class="token punctuation">)</span> <span class="token hvariable">_</span> <span class="token operator">=</span>
    <span class="token hvariable">traceIfFalse</span> <span class="token string">"player1 should reveal the original choice"</span>
      <span class="token punctuation">(</span><span class="token hvariable">player1ChoiceHash</span> <span class="token operator">==</span> <span class="token hvariable">presentedPlayer1ChoiceHash</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token hvariable">traceIfFalse</span> <span class="token string">"player1 beats player2"</span>
      <span class="token punctuation">(</span><span class="token hvariable">GameChoice.beats</span> <span class="token hvariable">player1Choice</span> <span class="token hvariable">player2Choice</span><span class="token punctuation">)</span>
        <span class="token keyword">where</span>
            <span class="token hvariable">player1ChoiceString</span> <span class="token operator">::</span> <span class="token constant">ByteString</span>
            <span class="token hvariable">player1ChoiceString</span> <span class="token operator">=</span> <span class="token keyword">case</span> <span class="token hvariable">player1Choice</span> <span class="token keyword">of</span>
                <span class="token constant">GameChoice.Rock</span>     <span class="token operator">-></span> <span class="token hvariable">rock</span>
                <span class="token constant">GameChoice.Paper</span>    <span class="token operator">-></span> <span class="token hvariable">paper</span>
                <span class="token constant">GameChoice.Scissors</span> <span class="token operator">-></span> <span class="token hvariable">scissors</span>

            <span class="token hvariable">presentedPlayer1ChoiceHash</span> <span class="token operator">::</span> <span class="token constant">ByteString</span>
            <span class="token hvariable">presentedPlayer1ChoiceHash</span> <span class="token operator">=</span>  <span class="token hvariable">choiceHash</span>
                <span class="token keyword">where</span>
                    <span class="token hvariable">choiceHash</span> <span class="token operator">=</span> <span class="token hvariable">sha2_256</span> <span class="token punctuation">(</span><span class="token hvariable">nonce</span> <span class="token operator">`concatenate`</span> <span class="token hvariable">player1ChoiceString</span><span class="token punctuation">)</span></code></pre></div>
<p>Note: I’ve omitted some details for clarity, check the <a href="https://github.com/franleplant/plutus-pioneer-program-fork/blob/rock-paper-scissors/code/week07/src/RPS/Validator.hs">full code</a></p>
<h2 id="off-chain-code" style="position:relative;">Off-chain code<a href="#off-chain-code" aria-label="off chain code permalink" class="header-anchor after">#</a></h2>
<p>Plutus is heavy on the Off-chain code, but it is safe to do so because the important constraints should
always be implemented on the <code class="language-text">validators</code>.</p>
<p>The off-chain code, also written in Haskell and that will be later allowed to be run in the browser simply
allows two users to play this game. The first player <em>instantiates</em> the contract by playing secretly and
adding a stake.</p>
<p>Player2 plays by finding an open game and playing and staking.</p>
<p>When the deadlines are passed a winner is decided and the reward (staked) is claimed.</p>
<p>Nothing illegal should be allowed to happen because our on-chain code (validator) should only allow
certain valid transactions to happen and nothing else.</p>
<p><a href="https://github.com/franleplant/plutus-pioneer-program-fork/blob/rock-paper-scissors/code/week07/src/RPS.hs">off chain code</a></p>
<h2 id="outro" style="position:relative;">Outro<a href="#outro" aria-label="outro permalink" class="header-anchor after">#</a></h2>
<p><a href="https://github.com/franleplant/plutus-pioneer-program-fork/tree/rock-paper-scissors/code/week07/src">Check the full code here</a></p>
<p>Cardano and Plutus are really fun and interesting and there is a lot of things coming their way
that make me super excited about.</p>
<p>I’m anxious about actually deploying this dummy game to the main net and add a nice UI on top of it.</p></section></article><div class="py-4"><style data-emotion-css="e42043">.css-e42043{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media (min-width:800px){.css-e42043{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><nav class="-m-1 css-e42043 ecmzeu0"></nav></div></div></main></div><footer class="p-3 text-center mt-auto hidden md:block">© <!-- -->2021<!-- -->, dondecaballero.com</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-207539500-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/cardano-smart-contract-game/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-79b23a2c0dd7adcbe04f.js"],"app":["/app-883d5d47b8c5000034e3.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-16703ee5599528db9f93.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-66b8b271e8ba6383a0fb.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-dc77d31ba39d97712fb7.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-2594e88631a0a57460a1.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-215e4bd5a8dabe20c4c9.js"]};/*]]>*/</script><script src="/polyfill-79b23a2c0dd7adcbe04f.js" nomodule=""></script><script src="/component---src-templates-blog-post-tsx-215e4bd5a8dabe20c4c9.js" async=""></script><script src="/201ad6c3f2c882b9d9cf079e4b183f9823aadb3d-ec3aed9365b4e4f3c2a0.js" async=""></script><script src="/app-883d5d47b8c5000034e3.js" async=""></script><script src="/styles-755093da0c07f4b49226.js" async=""></script><script src="/framework-8e528b732ab2eaadb7b7.js" async=""></script><script src="/webpack-runtime-6d19b8d63e7883bef03b.js" async=""></script></body></html>